#!/usr/bin/env bash
# -*- bash -*-
#
#
set -u -e -o pipefail


# === Now for Public/ files:

file=$1
shift

if [[ "$file" == "all" ]]
then
  files=$( $UP/util/files_with_ext Public/ .rb | grep markup.rb | grep -v applets/ | grep -v mustache )
  for f in $files
  do
    $0 $f
  done
  exit 0
fi

html=${file/.rb/.mustache.rb}

bin/bundle exec dot_why ./Public/layout.rb $file  > $html

echo -e "=== wrote: $html"

