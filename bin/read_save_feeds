#!/usr/bin/env node
// # -*- js   -*-
// #
// #!/usr/bin/env bash
// # -*- bash -*-
// #


var _       = require("underscore");
var cheerio = require("cheerio");
var Topogo = require("topogo").Topogo;
var River  = require("da_river").River;

var Feed   = require("../Server/RSS_Reader/Feed").Feed;
var Post   = require("../Server/RSS_Reader/Post").Post;


var items = [];

River.new()

.job(function (j) {
  Feed.update_next(j);
})

.run(function (fin, vals) {
  console.log(vals.feed_id);
  if (vals.posts.length)
    console.log(vals.posts[0].data);
  Topogo.close();
});


process.on('SIGINT', function () {
  Topogo.close();
});
