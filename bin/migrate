#!/usr/bin/env bash
# -*- bash -*-
#
cmd="$1"
set -u -e -o pipefail

mods=( Customer Screen_Name Chat Home_Page )

bin="../../node_modules/duck_duck_duck/bin/duck_duck_duck"

if [[ "$cmd" == "" ]]
then
  cmd="up"
fi

if [[ "$cmd" == "create" ]]
then

  if [[ ! "${mods[@]}" == *"$2"* ]]
  then
    echo "$2 not in list."
    exit 1
  fi

  cd "Server/$2"
  $bin create $3
  cd ../..

else

  for m in "${mods[@]}"
  do
    cd "Server/$m"
    pwd
    $bin $@
    cd ../..
  done

fi

