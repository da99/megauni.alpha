#!/usr/bin/env bash
# -*- bash -*-
#
skip=$1
set -e -u -o pipefail

if [[ "$skip" == "fast" ]]
then
  shift
else
  bin/migrate reset > /dev/null
fi

if [[ ! -z "$@" ]]
then
  bin/bundle exec bacon "$@"
  exit 0
fi

. bin/model_list
test_mods=( Ok )
for m in ${mods[@]}
do
  test_mods+=( "$m" )
done

for m in ${test_mods[@]}
do
  for f in tests/$m/*.rb
  do
    bin/bundle exec bacon $f
  done
done # === mod loop


# http://www.ibm.com/developerworks/aix/library/au-learningtput/
green_bg=$(tput setb 2)
white=$(tput setaf 7)
reset_color=$(tput sgr0)
bold_white_on_green=$(tput bold)${white}${green_bg}
bold_white=$(tput bold)${white}






